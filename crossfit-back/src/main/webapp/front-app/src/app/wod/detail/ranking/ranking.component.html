<mat-progress-bar mode="indeterminate" *ngIf="!rankings"></mat-progress-bar>

<div *ngIf="rankings">

    <mat-button-toggle-group (change)="mode=$event.value">
      <mat-button-toggle value="COMPATE_TO_ME" [checked]="mode=='COMPATE_TO_ME'"
        aria-label="{{'wod.ranking.COMPATE_TO_ME' | translate}}">
        <mat-icon>person</mat-icon>
      </mat-button-toggle>
      <mat-button-toggle value="COMPATE_TO_ALL" [checked]="mode=='COMPATE_TO_ALL'"
        aria-label="{{'wod.ranking.COMPATE_TO_ALL' | translate}}">
        <mat-icon>people</mat-icon>
      </mat-button-toggle>
    </mat-button-toggle-group>

    <table mat-table [dataSource]="mode == 'COMPATE_TO_ALL' ? rankings : rankingsInCategory" class="mat-elevation-z8">
        
        <ng-container matColumnDef="order">
          <th mat-header-cell *matHeaderCellDef> No. </th>
          <td mat-cell *matCellDef="let element" [ngClass]="{'my-rank':element.id == myresult.id}"> 
            {{mode == 'COMPATE_TO_ME' ? element.orderInCategory : element.order}} 
            <span *ngIf="mode == 'COMPATE_TO_ALL'">
                - {{'wod.ranking.title.min.' + element.title | translate }} -
                {{'wod.ranking.category.min.' + element.category | translate }}
            </span>
          </td>
        </ng-container>

        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef> Name </th>
          <td mat-cell *matCellDef="let element" [ngClass]="{'my-rank':element.id == myresult.id}"> {{element.displayName}} </td>
        </ng-container>

        <ng-container matColumnDef="result">
          <th mat-header-cell *matHeaderCellDef> Result </th>
          <td mat-cell *matCellDef="let element" [ngClass]="{'my-rank':element.id == myresult.id}"> {{element.displayResult}} </td>
        </ng-container>
        
        <tr mat-header-row *matHeaderRowDef="['order', 'name', 'result']"></tr>
        <tr mat-row *matRowDef="let row; columns: ['order', 'name', 'result'];"></tr>
    
    </table>
</div>